<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>HPL Benchmark Test Implementation on Georgia Tech PACE-ICE Cluster &#8211; Muyang Guo</title> <meta name="description" content="Muyang acquired B.S and M.S degree in Mechanical Engineering from Georgia Tech and is currently pursuing another M.S degree in Computational Science & Engineering"> <meta name="keywords" content="HPC"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://localhost:4000/assets/img/avatar.png"> <meta name="twitter:title" content="HPL Benchmark Test Implementation on Georgia Tech PACE-ICE Cluster"> <meta name="twitter:description" content="A final project for my HPC class documentation"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="HPL Benchmark Test Implementation on Georgia Tech PACE-ICE Cluster"> <meta property="og:description" content="A final project for my HPC class documentation"> <meta property="og:url" content="http://localhost:4000/HPL-Benchmark-On-Cluster/"> <meta property="og:site_name" content="Muyang Guo"> <meta property="og:image" content="http://localhost:4000/assets/img/avatar.png"> <link rel="canonical" href="http://localhost:4000/HPL-Benchmark-On-Cluster/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Muyang Guo Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/background.jpeg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-157817052-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-157817052-1'); </script> <!-- google global ads --> <script data-ad-client="ca-pub-1032547897605308" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button id="navbutton" class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://localhost:4000/assets/img/avatar.png" alt="Muyang Guo photo" class="author-photo"> <h4>Muyang Guo</h4> <p>Muyang acquired B.S and M.S degree in Mechanical Engineering from Georgia Tech and is currently pursuing another M.S degree in Computational Science & Engineering</p> </li> <li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="mailto:muyangguo@gmail.com" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-envelope-square"></i> Email</a> </li> <li> <a href="https://linkedin.com/in/muyang-guo-445a3465" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="https://github.com/MUYANGGUO" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <!-- <li> <a href="#">Tech Blogs</a> <ul class="dl-submenu"> --> <li><a href="http://localhost:4000/posts/">Tech Blogs</a></li> <!-- </ul> </li> --> <li><a href="http://localhost:4000/projects/" >Projects</a></li> <li><a href="http://localhost:4000/tags/">Tags Archive</a></li> <li><script async src="https://cse.google.com/cse.js?cx=000703603923980589510:t0yhdcd_f-u"></script> <div class="gcse-search"></div> </li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <div class="sidenav"> <h1 > " MUYANG's SITE " </h1> <hr class="hr-line"> <h1 > " SEARCH " </h1> <h1 > <script async src="https://cse.google.com/cse.js?cx=000703603923980589510:t0yhdcd_f-u"></script> <div class="gcse-search"></div> </h1> <hr class="hr-line"> <h1 > " WEB STATS " </h1> <!-- statistics --> <h1 > <script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5i5a5rwv7vf&amp;m=0c&amp;c=ff007e&amp;cr1=fff600&amp;f=times_new_roman&amp;l=49&amp;bv=85&amp;cw=ffffff&amp;cb=000000" async="async"></script> </h1> <hr class="hr-line"> <div class="footer"> © 2020 muyangguo.xyz </div> </div> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>HPL Benchmark Test Implementation on Georgia Tech PACE-ICE Cluster</h1> <h4>10 Nov 2019</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~12 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="http://localhost:4000/projects/"> <i class="fa fa-chevron-left"></i> </a> </div> <h2 id="hplinpack-dense-linear-algebra-test-on-pace-ice-cluster"><a href="http://www.netlib.org/benchmark/hpl/">HPLinpack</a>: Dense Linear Algebra Test on PACE-ICE Cluster</h2> <p>HPL - A Portable Implementation of the High-Performance Linpack, Benchmark for Distributed-Memory Computers <br /> And the versioning is: <br /> HPL 2.3 - by Antoine Petitet, Clint Whaley, Jack Dongar <br /></p> <blockquote> <p>HPL is a High-Performance Linpack benchmark implementation.</p> </blockquote> <blockquote> <p>HPL is written in a portable ANSI C and requires an MPI implementation as well as either BLAS or VSIPL library. Such choice of software dependencies gives HPL both portability and performance.</p> </blockquote> <blockquote> <p>The HPL package provides a testing and timing program to quantify the accuracy of the obtained solution as well as the time it took to compute it. The best performance achievable by this software on your system depends on a large variety of factors. Nonetheless, with some restrictive assumptions on the interconnection network, the algorithm described here and its attached implementation are scalable in the sense that their parallel efficiency is maintained constant with respect to the per processor memory usage.</p> </blockquote> <p>In our implementations for this project, <br /></p> <p>All the following packages are included in the module mkl/19.0.</p> <ul> <li> <p>HPL rely on an efficient implementation of the Basic Linear Algebra Subprograms (BLAS) (http://www.netlib.org/blas/blas-3.8.0.tgz)</p> </li> <li> <p>And MPI module we already had as mvapich2 2.3, a MPI based software package, alternative versionings can be found at (http://mvapich.cse.ohio-state.edu/downloads/)</p> </li> </ul> <h3 id="problems-to-be-solved">Problems to be solved:</h3> <p>The code solves a uniformely random system of linear equations and reports time and floating-point execution rate using a standard formula for operation count. Specifically, HPL generates a linear system of equations of order n and solves it using LU decomposition with partial row pivoting.<br /> For N Problem size, it will need (2/3 * N^3－2N^2) steps to compute, and it measure the computational time performing such (2/3 * N^3－2N^2) steps operations. And then calculated the FLOPs. <br /> Since HPL performs computation on an N x N array of Double Precision (DP) elements, and that each double precision element requires sizeof(double) = 8 bytes, the memory consumed for a problem size of N is 8N^2.<br /> NB=192 for the broadwell processors.<br /> P and Q, knowing that the product P x Q SHOULD typically be equal to the number of MPI processes.<br /></p> <blockquote> <p>Here are the parameters:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>T/V    : Wall time / encoded variant.
N      : The order of the coefficient matrix A.
NB     : The partitioning blocking factor.
P      : The number of process rows.
Q      : The number of process columns.
Time   : Time in seconds to solve the linear system.
Gflops : Rate of execution for solving the linear system.
</code></pre></div> </div> </blockquote> <h3 id="values-of-the-benchmark-">Values of the benchmark: <br /></h3> <p>The HPL benchmark is used as reference benchmark to provide data for the Top500 list and thus rank to supercomputers worldwide.It has the testing program to quantify the accuracy of the obtained solution as well as the time it took to compute it. Generally It reports the computation time per node, and the FLOPS rate.</p> <h3 id="nodes-on-pace-ice-cluster-intended-to-use">Nodes on pace-ice cluster intended to use:<br /></h3> <p>We chose the nodes on pace-ice clusters with the CPU only. <br /> They are the ones with 28 CPU cores (14 physical cores), Model is Intel(R) Xeon(R) CPU E5-2680 v4 @2.40GHz machines. <br /> We intended to perform benchmark tests on one node and four nodes.<br /></p> <h4 id="the-balance-of-being-to-specific-to-one-application-but-very-predictive-versus-being-general-to-lots-of-applications-while-being-too-simple-to-predict-the-performance-of-any-application-very-well">The balance of being to specific to one application but very predictive, versus being general to lots of applications while being too simple to predict the performance of any application very well:</h4> <p>The HPLinpack (HPL) as a scalable addition to the original Linpack benchmark suites, due to its parallel computation efficiency remaining constant respect to per process memory usage, succeeded in scalability. And it outputs only one single number in time and FLOPS, making this benchmark results are easily compared with different machines.<br /> In this sense, the benchmark is very good at being general to lots of applications. <br /> However, it only tests the <strong>dense linear system</strong>, omitted a fact that there are many more other operations can be taken into account to the performance evaluation. Thus, the best results can be achieved by fine tuning for a particular machine targeting to solving the dense linear system, which caused the results shown are biased. <br /> That is to say, the benchmark is too simple for all kinds of applications testing, but can be very predictive for machines or applications specificially for dense linear system problem solving. <br /></p> <h3 id="source-code">Source code:</h3> <p>The source code can be obtained from (http://www.netlib.org/benchmark/hpl/hpl-2.3.tar.gz) as a tar, and the dependency packages are BLAS (http://www.netlib.org/blas/blas-3.8.0.tgz) and mpi (https://download.open-mpi.org/release/open-mpi/v4.0/openmpi-4.0.2.tar.gz). However, in practice, we directly loaded the module installed on PACE. I have documented a step by step workflow for how to successfully install and run the benchmark.</p> <h3 id="dependencies-and-enviroment">Dependencies and Enviroment</h3> <p>The benchmark needs to be run on a computing node, the following modules need to be loaded:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module use $CSE6230_DIR/modulefiles
module load cse6230/core
module load cse6230/mkl/19.0
</code></pre></div></div> <p>The benchmark can be made locally once downloaded, and it required MPI packages to successfully run. In our case, we already have the MPI software installed.</p> <h3 id="workflow">Workflow</h3> <h3 id="step-1-benchmark-installation">Step 1 Benchmark installation:</h3> <p>Create a directory named “hpl” under “$CSE6230_DIR”/final, to contain all the neccessary files for the benchmark.</p> <h4 id="about-downloading-the-packages">About Downloading the packages:</h4> <p>hpl-2.3.tar.gz can be downloaded at (http://www.netlib.org/benchmark/hpl/hpl-2.3.tar.gz) <br /> the benchmark tool is hpl-2.3, but blas will be one of the neccessary package to successfully make the executionables BLAS. In our project, the linear algebra package is contained with the intel mkl module, we do not neccessarily install it from scratch.</p> <h4 id="about-building-the-tool-packages">About building the tool packages:</h4> <h5 id="load-modules">Load Modules:</h5> <p>It is always needed to load the neccessary modules first, here to ease the touble, we always load :</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load cse6230/core
module load mkl/19.0
</code></pre></div></div> <h5 id="hpl">HPL:</h5> <p>After downloading and uploads the packages to the final/hpl folder:</p> <p><code class="highlighter-rouge">mguo34@coc-ice:~/cse6230/final/hpl$ tar -xzvf hpl-2.3.tar.gz</code> <br /></p> <p><code class="highlighter-rouge">mguo34@coc-ice:~/cse6230/final/hpl$ cd hpl-2.3/setup</code> <br /></p> <p>To generate a template:<br /></p> <p><code class="highlighter-rouge">mguo34@coc-ice:~/cse6230/final/hpl/hpl-2.3/setup$ sh make_generic </code> <br /></p> <p>Then have our make file named as Make.Linux, and move it to the higher level directory <br /></p> <p><code class="highlighter-rouge">mguo34@coc-ice:~/cse6230/final/hpl/hpl-2.3/setup$ cp Make.UNKNOWN ../Make.Linux </code> <br /></p> <p>And go back to hpl/hpl-2.3/ directory <br /> <code class="highlighter-rouge">mguo34@coc-ice:~/cse6230/final/hpl/hpl-2.3/setup$ cd .. </code> <br /></p> <p>Now we have a Make.Linux template to work on.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mguo34@coc-ice:~/cse6230/final/hpl/hpl-2.3<span class="nv">$ </span><span class="nb">ls
</span>acinclude.m4  BUGS          config.sub    COPYRIGHT  INSTALL     Makefile.am  Make.top  README   THANKS
aclocal.m4    ChangeLog     configure     depcomp    install-sh  Makefile.in  man       setup    TODO
AUTHORS       compile       configure.ac  HISTORY    lib         Make.Linux   missing   src      TUNING
bin           config.guess  COPYING       include    Makefile    makes        NEWS      testing  www

</code></pre></div></div> <p>Open with any editors, it should be showing a template, yet not completed, we need add dependecy patch to make sure the tool can be successfully built. it will need mvapich2, BLAS, and the hpl <br /></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mguo34@coc-ice:~/cse6230/final/hpl/hpl-2.3<span class="nv">$ </span>vi Make.Linux
</code></pre></div></div> <h5 id="linear-algebra-package">Linear Algebra Package:</h5> <p>The linear algebra package is already contained within the mkl/19.0 module, we will simply load this module, and modify the dependecy in Make.Linux file, like the description below:</p> <h5 id="modify-make-file">MODIFY MAKE FILE:</h5> <p>After successfully get all the neccessary files, we modified package paths and complier/linkers choice in Make.Linux config file:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TOPdir       <span class="o">=</span> <span class="si">$(</span>HOME<span class="si">)</span>/cse6230-hw/final/hpl/hpl-2.3
MPdir        <span class="o">=</span> /usr/local/pacerepov1/intel/compiler/16.0/impi/5.1.1.109
MPinc        <span class="o">=</span> <span class="nt">-I</span> <span class="si">$(</span>MPdir<span class="si">)</span>/include64
MPlib        <span class="o">=</span> <span class="si">$(</span>MPdir<span class="si">)</span>/intel64/lib/libmpi_mt.so
Adir        <span class="o">=</span> <span class="si">$(</span>MKLROOT<span class="si">)</span>
ifndef  LAinc
LAinc        <span class="o">=</span> <span class="nt">-I</span> <span class="si">$(</span>LAdir<span class="si">)</span>/include/
endif
ifndef  LAlib
LAlib        <span class="o">=</span> <span class="nt">-L</span><span class="si">$(</span>LAdir<span class="si">)</span>/lib/intel64 <span class="se">\</span>
               <span class="nt">-Wl</span>,--start-group <span class="se">\</span>
               <span class="si">$(</span>LAdir<span class="si">)</span>/lib/intel64/libmkl_intel_lp64.a <span class="se">\</span>
               <span class="si">$(</span>LAdir<span class="si">)</span>/lib/intel64/libmkl_intel_thread.a <span class="se">\</span>
               <span class="si">$(</span>LAdir<span class="si">)</span>/lib/intel64/libmkl_core.a <span class="se">\</span>
               <span class="nt">-Wl</span>,--end-group <span class="nt">-lpthread</span> <span class="nt">-ldl</span>
endif

CC       <span class="o">=</span> mpiicc
CCNOOPT  <span class="o">=</span> <span class="si">$(</span>HPL_DEFS<span class="si">)</span>
OMP_DEFS <span class="o">=</span> <span class="nt">-qopenmp</span>
CCFLAGS  <span class="o">=</span> <span class="si">$(</span>HPL_DEFS<span class="si">)</span> <span class="nt">-O3</span> <span class="nt">-w</span> <span class="nt">-ansi-alias</span> <span class="nt">-i-static</span> <span class="nt">-z</span> noexecstack <span class="nt">-z</span> relro <span class="nt">-z</span> now <span class="nt">-nocompchk</span>
LINKER       <span class="o">=</span> <span class="si">$(</span>CC<span class="si">)</span>
LINKFLAGS    <span class="o">=</span> <span class="si">$(</span>CCFLAGS<span class="si">)</span> <span class="si">$(</span>OMP_DEFS<span class="si">)</span> <span class="nt">-mt_mpi</span>
</code></pre></div></div> <h5 id="compile-into-executable">Compile into executable:</h5> <p>Now go to the hpl-2.3 directory and start compiling: <br /> First Make clean:<br /> <code class="highlighter-rouge">mguo34@coc-ice:~/cse6230/final/hpl/hpl-2.3$ make arch=Linux clean_arch_all</code><br /> Then Make:<br /> <code class="highlighter-rouge">mguo34@coc-ice:~/cse6230/final/hpl/hpl-2.3$ make arch=Linux</code><br /></p> <h3 id="step-2-load-modules-and-run-a-test">Step 2 load modules and run a test:</h3> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module load cse6230/core
module load mkl/19.0
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CPU</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> /proc/cpuinfo | <span class="nb">grep</span> <span class="s2">"model name"</span> | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
<span class="nv">COUNT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> /proc/cpuinfo | <span class="nb">grep </span>processor | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span>
<span class="nv">MEM</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> /proc/meminfo |grep MemTotal | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"CPU : </span><span class="nv">$CPU</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Total CPU Cores : </span><span class="nv">$COUNT</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"</span><span class="nv">$MEM</span><span class="s2">"</span>
</code></pre></div></div> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CPU : model name	: Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz
Total CPU Cores : 28
MemTotal:       132176424 kB
</code></pre></div></div> <p>According to HPL suggestion, a good N should makes the program use 90% of total memory, which is \(\sqrt{(130844220*1024/8)}*0.9=116,472\). However, for testrun purpose, it takes too long to compute. So we selected a N=19200 and N=38400, which is about ten and five times smaller than that. For Block size, we also followed the recommendation to choose a value in the [32 , 256] interval. In our example, we selected 64 and 192. Because the example test was performed on one node (chip), each core can be considered closely connected. Hence, 4 by 7 grid was set.</p> <p>When submitting to compute node with a script (<strong><code class="highlighter-rouge">"$CSE6230_DIR"/final/script/hpl_singleNode.sh**), we tested from 19200 to 153600 to see how different size (Ns) affect the performance. **Example job submission script can be found in </code>“$CSE6230_DIR”/final/script/hpl_example.sh`</strong>.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># testrun (for simplicity, only partial test is shown below)</span>
<span class="nb">cd</span> /nv/coc-ice/zjiang333/cse6230-hw/final/hpl/hpl-2.3/bin/Linux/
mpirun <span class="nt">-np</span> 28 ./xhpl 
</code></pre></div></div> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>================================================================================
HPLinpack 2.3  --  High-Performance Linpack benchmark  --   December 2, 2018
Written by A. Petitet and R. Clint Whaley,  Innovative Computing Laboratory, UTK
Modified by Piotr Luszczek, Innovative Computing Laboratory, UTK
Modified by Julien Langou, University of Colorado Denver
================================================================================

An explanation of the input/output parameters follows:
T/V    : Wall time / encoded variant.
N      : The order of the coefficient matrix A.
NB     : The partitioning blocking factor.
P      : The number of process rows.
Q      : The number of process columns.
Time   : Time in seconds to solve the linear system.
Gflops : Rate of execution for solving the linear system.

The following parameter values will be used:

N      :   19200    38400 
NB     :      64      192 
PMAP   : Row-major process mapping
P      :       4 
Q      :       7 
PFACT  :   Right 
NBMIN  :       4 
NDIV   :       2 
RFACT  :   Crout 
BCAST  :  1ringM 
DEPTH  :       0 
SWAP   : Mix (threshold = 64)
L1     : transposed form
U      : transposed form
EQUIL  : yes
ALIGN  : 8 double precision words

--------------------------------------------------------------------------------

- The matrix A is randomly generated for each test.
- The following scaled residual check will be computed:
      ||Ax-b||_oo / ( eps * ( || x ||_oo * || A ||_oo + || b ||_oo ) * N )
- The relative machine precision (eps) is taken to be               2.220446e-16
- Computational tests pass if scaled residuals are less than                16.0

================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       19200    64     4     7               8.38             5.6287e+02
HPL_pdgesv() start time Wed Dec 11 15:32:05 2019

HPL_pdgesv() end time   Wed Dec 11 15:32:14 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.57135916e-03 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       19200   192     4     7               6.31             7.4785e+02
HPL_pdgesv() start time Wed Dec 11 15:32:14 2019

HPL_pdgesv() end time   Wed Dec 11 15:32:21 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.73935730e-03 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       38400    64     4     7              60.83             6.2057e+02
HPL_pdgesv() start time Wed Dec 11 15:32:22 2019

HPL_pdgesv() end time   Wed Dec 11 15:33:23 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.37495714e-03 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       38400   192     4     7              43.81             8.6164e+02
HPL_pdgesv() start time Wed Dec 11 15:33:25 2019

HPL_pdgesv() end time   Wed Dec 11 15:34:09 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.34900801e-03 ...... PASSED
================================================================================

Finished      4 tests with the following results:
              4 tests completed and passed residual checks,
              0 tests completed and failed residual checks,
              0 tests skipped because of illegal input values.
--------------------------------------------------------------------------------

End of Tests.
================================================================================
</code></pre></div></div> <h3 id="step-3-gather-statistics-with-a-performance-metric-example-shown-here-results-plots-are-not-included">step 3 gather statistics with a performance metric (example shown here, results plots are not included)</h3> <p>A shell was created here below:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

<span class="c">#PBS -N hpl_fullscale</span>
<span class="c">### request four node with 112 cores</span>
<span class="c">#PBS -l nodes=4:ppn=28,walltime=00:30:00</span>
<span class="c">#PBS -q coc-ice-multi</span>

module load cse6230/core
module load mkl/19.0

<span class="nb">cd</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">"</span>/cse6230-hw/final/hpl/hpl-2.3/bin/Linux/
<span class="c">### run example with 112 cores</span>
<span class="nb">cp </span>HPL_fullscale.dat HPL.dat
mpirun <span class="nt">-np</span> 112 ./xhpl | <span class="nb">tee</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">"</span>/cse6230-hw/final/fullscale.txt
</code></pre></div></div> <p>To ensure the quality of statistics, we have run the benchmark at the same setting for five times. Below is an example of running HPL benchmark on four nodes.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>================================================================================
HPLinpack 2.3  --  High-Performance Linpack benchmark  --   December 2, 2018
Written by A. Petitet and R. Clint Whaley,  Innovative Computing Laboratory, UTK
Modified by Piotr Luszczek, Innovative Computing Laboratory, UTK
Modified by Julien Langou, University of Colorado Denver
================================================================================

An explanation of the input/output parameters follows:
T/V    : Wall time / encoded variant.
N      : The order of the coefficient matrix A.
NB     : The partitioning blocking factor.
P      : The number of process rows.
Q      : The number of process columns.
Time   : Time in seconds to solve the linear system.
Gflops : Rate of execution for solving the linear system.

The following parameter values will be used:

N      :   19200    38400    57600    76800    96000   115200 
NB     :     192 
PMAP   : Row-major process mapping
P      :       8 
Q      :      14 
PFACT  :   Right 
NBMIN  :       4 
NDIV   :       2 
RFACT  :   Crout 
BCAST  :  1ringM 
DEPTH  :       0 
SWAP   : Mix (threshold = 64)
L1     : transposed form
U      : transposed form
EQUIL  : yes
ALIGN  : 8 double precision words

--------------------------------------------------------------------------------

- The matrix A is randomly generated for each test.
- The following scaled residual check will be computed:
      ||Ax-b||_oo / ( eps * ( || x ||_oo * || A ||_oo + || b ||_oo ) * N )
- The relative machine precision (eps) is taken to be               2.220446e-16
- Computational tests pass if scaled residuals are less than                16.0

================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       19200   192     8    14               2.67             1.7684e+03
HPL_pdgesv() start time Wed Dec 11 16:12:52 2019

HPL_pdgesv() end time   Wed Dec 11 16:12:55 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.64198128e-03 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       38400   192     8    14              14.03             2.6908e+03
HPL_pdgesv() start time Wed Dec 11 16:12:55 2019

HPL_pdgesv() end time   Wed Dec 11 16:13:09 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.22453577e-03 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       57600   192     8    14              41.69             3.0563e+03
HPL_pdgesv() start time Wed Dec 11 16:13:10 2019

HPL_pdgesv() end time   Wed Dec 11 16:13:52 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.34435654e-03 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       76800   192     8    14              94.65             3.1905e+03
HPL_pdgesv() start time Wed Dec 11 16:13:54 2019

HPL_pdgesv() end time   Wed Dec 11 16:15:28 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   9.74225766e-04 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4       96000   192     8    14             177.22             3.3282e+03
HPL_pdgesv() start time Wed Dec 11 16:15:31 2019

HPL_pdgesv() end time   Wed Dec 11 16:18:28 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   8.39070264e-04 ...... PASSED
================================================================================
T/V                N    NB     P     Q               Time                 Gflops
--------------------------------------------------------------------------------
WR01C2R4      115200   192     8    14             299.85             3.3992e+03
HPL_pdgesv() start time Wed Dec 11 16:18:32 2019

HPL_pdgesv() end time   Wed Dec 11 16:23:32 2019

--------------------------------------------------------------------------------
||Ax-b||_oo/(eps*(||A||_oo*||x||_oo+||b||_oo)*N)=   1.10942470e-03 ...... PASSED
================================================================================

Finished      6 tests with the following results:
              6 tests completed and passed residual checks,
              0 tests completed and failed residual checks,
              0 tests skipped because of illegal input values.
--------------------------------------------------------------------------------

End of Tests.
================================================================================
</code></pre></div></div> <hr /> <p>Copyright 2019 Muyang Guo</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#HPC" title="Pages tagged HPC" class="tag"><span class="term">HPC</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/HPL-Benchmark-On-Cluster/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/HPL-Benchmark-On-Cluster/" title="Share on Linkedin" class="tag"> <span class="term"><i class="fa fa-linkedin-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/HPL-Benchmark-On-Cluster/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'muyangguo'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
